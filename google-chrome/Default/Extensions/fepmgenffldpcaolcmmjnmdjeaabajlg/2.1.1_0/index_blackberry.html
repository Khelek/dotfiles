<!doctype html>
 <html>
 <head>
     <meta name="apple-mobile-web-app-capable" content="yes">
     <meta name="viewport" content="width=device-width height=device-height initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
     <title>OrganizeMe!</title>
     <script src="webworks-1.0.2.9.js"></script>
     <script src="enyo/framework/enyo.js" type="text/javascript"></script>
 </head>
 <body onLoad="onDeviceReady()">
     <script type="text/javascript">

		window.onorientationchange = function() 
		{
		    onRotate( );
		}

       	var theApp = null;
       
        function onDeviceReady(){
        	if (Util.isDebug()) {
            	console.log("starting the app");
            }

            // localStorage.clear();
            if (Platform.isWebOS() == false) {
            	
				if (Platform.isBlackBerry()) {
	                blackberry.app.event.onSwipeDown(showMenu);
				}
             
             	var startNormal = false;
                if (Settings.getSettings().accountVerified == true && Settings.getSettings().username != "" && Settings.getSettings().password != "") {
                    startNormal = true;
                }

                this.theApp = new MeOrg( );
                // this.theApp.startNormal = startNormal;
				
                this.theApp.renderInto(document.body);

                if (Util.isDebug()) {
                	console.log("everything should be rendered right now?!");
                }
                if (startNormal == true) {
	                this.theApp.normalStart();
                } else {
	                this.theApp.showWelcomePage();
                }
            }
        }
        
        function showMenu(){
        	if (Util.isDebug()) {
        		console.log("show menu!");
        	}
            if (this.theApp != null) {
            	this.theApp.showMenuDialog();
            }
		}

        function onRotate( ){
        	if (Util.isDebug()) {
        		console.log("onRotate detected!");
        	}
            if (this.theApp != null) {
            	this.theApp.onWindowRotated( );
            }
		}
     </script>
 </body>
 </html> 